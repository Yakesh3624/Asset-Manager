<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div class="alert success" *ngIf="isDeleted">User Deleted successfully!</div>
  <div class="search-bar">
    <h1>Users</h1>
    <div>
      <input type="text" [(ngModel)]="searchTerm" (input)="getAllData()"
        placeholder="Search by Users ID, Name, Role, Gender, Email" />
      <button (click)="search()" class="btn btn-primary">Search</button>
    </div>
  </div>
  <table>
    <tr>
      <th>UserID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Role</th>
      <th>Email</th>
      <th>Gender</th>
      <th>Contact Number</th>
      <th>Address</th>
      <th>Action</th>
    </tr>
    <tr *ngFor="let users of filteredData">
      <td>{{users.usersId}}</td>
      <td>{{users.firstName}}</td>
      <td>{{users.lastName}}</td>
      <td>{{users.role}}</td>
      <td>{{users.email}}</td>
      <td>{{users.gender}}</td>
      <td>{{users.contactNumber}}</td>
      <td>{{users.address}}</td>
      <td>
        <div>
          <button class="btn btn-info btn-sm" (click)="updateButton(users)">Update</button>
          <button class="btn btn-danger btn-sm" (click)="deleteUsers(users.usersId)">Delete</button>
        </div>
      </td>
    </tr>
  </table>

  <div *ngIf="isUpdate" class="update-form">
    <div>
      <div class="alert success" *ngIf="updated">User Updated successfully!</div>
    </div>
    <button class="close-btn-update" (click)="updateClose()">x</button>
    <form class=" container form" [formGroup]="myForm" (ngSubmit)="updateUsers(myForm.value)">
      <div>
        <label for="firstName">First Name</label>
        <input type="text" placeholder="First Name" id="firstName" required formControlName="firstName">
        <span style="color: red;" *ngIf="myForm.get('firstName')?.invalid && myForm.get('firstName')?.touched">First
          name
          is invalid</span><br>
      </div>

      <div>
        <label for="lastName">Last Name</label>
        <input type="text" placeholder="Last Name" id="lastName" required formControlName="lastName">
        <span style="color: red;" *ngIf="myForm.get('lastName')?.invalid && myForm.get('lastName')?.touched">Last name
          is invalid</span><br>
      </div>

      <div>
        <label for="role">Role</label>
        <select name="role" id="role" required formControlName="role">
          <option value="" disabled selected>--- Select ---</option>
          <option value="ADMIN">Admin</option>
          <option value="EMPLOYEE">Employee</option>
        </select>
        <span style="color: red;" *ngIf="myForm.get('role')?.invalid && myForm.get('role')?.touched">Role
          is invalid</span><br>
      </div>

      <div>
        <label for="email">Email</label>
        <input type="email" placeholder="Email" id="email" required formControlName="email">
        <span style="color: red;" *ngIf="myForm.get('email')?.invalid && myForm.get('email')?.touched">Email
          is invalid</span><br>
      </div>

      <div>
        <label for="gender">Gender</label>
        <select name="gender" id="gender" required formControlName="gender">
          <option value="" disabled selected>--- Select ---</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
        <span style="color: red;" *ngIf="myForm.get('gender')?.invalid && myForm.get('gender')?.touched">Gender
          is invalid</span><br>
      </div>

      <div>
        <label for="contactNumber">Contact Number</label>
        <input type="number" placeholder="Contact Number" id="contactNumber" required formControlName="contactNumber">
        <span style="color: red;"
          *ngIf="myForm.get('contactNumber')?.invalid && myForm.get('contactNumber')?.touched">Contact number
          is invalid</span><br>
      </div>

      <div>
        <label for="address">Address</label>
        <input type="text" placeholder="Address" id="address" required formControlName="address">
        <span style="color: red;" *ngIf="myForm.get('address')?.invalid && myForm.get('address')?.touched">Address
          is invalid</span><br>
      </div>

      <button type="submit" class="btn primary" [disabled]="myForm.invalid">Update</button>
    </form>
  </div>

  <footer>
    <p><strong>&copy; 2025 Asset Management System</strong> by Yakesh Balaji Raja P</p>
    <a href="https://www.linkedin.com/in/yakesh-balaji-raja-p-a90142238/" target="_blank">Contact</a>
  </footer>
</body>

</html>
